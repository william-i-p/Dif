{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _bezierEasing = require('bezier-easing');\n\nvar _bezierEasing2 = _interopRequireDefault(_bezierEasing);\n\nvar _windowScrollManager = require('window-scroll-manager');\n\nvar _windowScrollManager2 = _interopRequireDefault(_windowScrollManager);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} // Check if code is running in the browser (important for universal rendering)\n\n\nvar WINDOW_EXISTS = typeof window !== 'undefined'; // Regex that checks for numbers in string\n// formatted as \"{number}{unit}\" where unit is \"px\", \"vh\", \"%\" or none\n\nvar START_END_DURATION_REGEX = /^-?\\d+(\\.\\d+)?(px|vh|%)?$/;\nvar DEFAULT_UNIT = 'px';\nvar DEFAULT_ANGLE_UNIT = 'deg';\nvar ANGLE_PROPERTIES = ['rotate', 'rotateX', 'rotateY', 'rotateZ', 'skew', 'skewX', 'skewY', 'skewZ', 'hueRotate'];\nvar EASINGS = {\n  ease: [0.25, 0.1, 0.25, 1.0],\n  easeIn: [0.42, 0.0, 1.00, 1.0],\n  easeOut: [0.00, 0.0, 0.58, 1.0],\n  easeInOut: [0.42, 0.0, 0.58, 1.0],\n  easeInSine: [0.47, 0, 0.745, 0.715],\n  easeOutSine: [0.39, 0.575, 0.565, 1],\n  easeInOutSine: [0.445, 0.05, 0.55, 0.95],\n  easeInQuad: [0.55, 0.085, 0.68, 0.53],\n  easeOutQuad: [0.25, 0.46, 0.45, 0.94],\n  easeInOutQuad: [0.455, 0.03, 0.515, 0.955],\n  easeInCubic: [0.55, 0.055, 0.675, 0.19],\n  easeOutCubic: [0.215, 0.61, 0.355, 1],\n  easeInOutCubic: [0.645, 0.045, 0.355, 1],\n  easeInQuart: [0.895, 0.03, 0.685, 0.22],\n  easeOutQuart: [0.165, 0.84, 0.44, 1],\n  easeInOutQuart: [0.77, 0, 0.175, 1],\n  easeInQuint: [0.755, 0.05, 0.855, 0.06],\n  easeOutQuint: [0.23, 1, 0.32, 1],\n  easeInOutQuint: [0.86, 0, 0.07, 1],\n  easeInExpo: [0.95, 0.05, 0.795, 0.035],\n  easeOutExpo: [0.19, 1, 0.22, 1],\n  easeInOutExpo: [1, 0, 0, 1],\n  easeInCirc: [0.6, 0.04, 0.98, 0.335],\n  easeOutCirc: [0.075, 0.82, 0.165, 1],\n  easeInOutCirc: [0.785, 0.135, 0.15, 0.86]\n}; // Color regexes\n// 0 - 199 | 200 - 249 | 250 - 255\n\nvar REGEX_0_255 = '(1?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])'; // 0.0 - 1.9999...\n\nvar REGEX_0_1 = '([01](\\\\.\\\\d+)?)'; // 00 - FF\n\nvar REGEX_TWO_HEX_DIGITS = '([a-f\\\\d]{2})';\nvar HEX_REGEX = new RegExp('^#' + REGEX_TWO_HEX_DIGITS + REGEX_TWO_HEX_DIGITS + REGEX_TWO_HEX_DIGITS + '$', 'i');\nvar RGB_REGEX = new RegExp('^rgb\\\\(' + REGEX_0_255 + ',' + REGEX_0_255 + ',' + REGEX_0_255 + '\\\\)$', 'i');\nvar RGBA_REGEX = new RegExp('^rgba\\\\(' + REGEX_0_255 + ',' + REGEX_0_255 + ',' + REGEX_0_255 + ',' + REGEX_0_1 + '\\\\)$', 'i');\nvar SCROLL_OFFSET = 50;\nvar RESIZE_DEBOUNCE_TIMEOUT = 150; // CSS transform map\n\nvar TRANSFORM_MAP = {\n  rotate: function rotate(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ANGLE_UNIT;\n    return 'rotate(' + value + unit + ')';\n  },\n  rotateX: function rotateX(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ANGLE_UNIT;\n    return 'rotateX(' + value + unit + ')';\n  },\n  rotateY: function rotateY(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ANGLE_UNIT;\n    return 'rotateY(' + value + unit + ')';\n  },\n  rotateZ: function rotateZ(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ANGLE_UNIT;\n    return 'rotateZ(' + value + unit + ')';\n  },\n  scale: function scale(value) {\n    return 'scale(' + value + ')';\n  },\n  scaleX: function scaleX(value) {\n    return 'scaleX(' + value + ')';\n  },\n  scaleY: function scaleY(value) {\n    return 'scaleY(' + value + ')';\n  },\n  scaleZ: function scaleZ(value) {\n    return 'scaleZ(' + value + ')';\n  },\n  skew: function skew(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'skew(' + value + unit + ')';\n  },\n  skewX: function skewX(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'skewX(' + value + unit + ')';\n  },\n  skewY: function skewY(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'skewY(' + value + unit + ')';\n  },\n  skewZ: function skewZ(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'skewZ(' + value + unit + ')';\n  },\n  translateX: function translateX(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'translateX(' + value + unit + ')';\n  },\n  translateY: function translateY(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'translateY(' + value + unit + ')';\n  },\n  translateZ: function translateZ(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'translateZ(' + value + unit + ')';\n  }\n}; // Order of CSS transforms matters\n\nvar ORDER_OF_TRANSFORMS = ['translateX', 'translateY', 'translateZ', 'skew', 'skewX', 'skewY', 'skewZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ']; // CSS properties that use color values\n\nvar COLOR_PROPERTIES = ['backgroundColor', 'borderBottomColor', 'borderColor', 'borderLeftColor', 'borderRightColor', 'borderTopColor', 'color', 'fill', 'stroke']; // CSS filter map\n// blur()\n// brightness()\n// contrast()\n// grayscale()\n// hue-rotate()\n// invert()\n// opacity() // use opacityFilter\n// saturate()\n// sepia()\n// Not supported\n// drop-shadow()\n// url()\n\nvar FILTER_MAP = {\n  blur: function blur(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'blur(' + value + unit + ')';\n  },\n  brightness: function brightness(value) {\n    return 'brightness(' + value + ')';\n  },\n  contrast: function contrast(value) {\n    return 'contrast(' + value + ')';\n  },\n  grayscale: function grayscale(value) {\n    return 'grayscale(' + value + ')';\n  },\n  hueRotate: function hueRotate(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ANGLE_UNIT;\n    return 'hue-rotate(' + value + unit + ')';\n  },\n  invert: function invert(value) {\n    return 'invert(' + value + ')';\n  },\n  opacityFilter: function opacityFilter(value) {\n    return 'opacity(' + value + ')';\n  },\n  saturate: function saturate(value) {\n    return 'saturate(' + value + ')';\n  },\n  sepia: function sepia(value) {\n    return 'sepia(' + value + ')';\n  }\n};\nvar FILTER_PROPERTIES = ['blur', 'brightness', 'contrast', 'grayscale', 'hueRotate', 'invert', 'opacityFilter', 'saturate', 'sepia']; // Props to be removed from passing directly to the component element\n\nvar PROPS_TO_OMIT = ['animateWhenNotInViewport', 'children', 'className', 'freeze', 'parallaxData', 'style', 'tagName', 'onPlxStart', 'onPlxEnd']; // Get element's top offset\n\nfunction getElementTop(el) {\n  var top = 0;\n  var element = el;\n\n  do {\n    top += element.offsetTop || 0;\n    element = element.offsetParent;\n  } while (element);\n\n  return top;\n} // Returns CSS unit\n\n\nfunction getUnit(property, unit) {\n  var propertyUnit = unit || DEFAULT_UNIT;\n\n  if (ANGLE_PROPERTIES.indexOf(property) >= 0) {\n    propertyUnit = unit || DEFAULT_ANGLE_UNIT;\n  }\n\n  return propertyUnit;\n} // Takes string value (in px/vh/%) and returns number\n\n\nfunction getValueInPx(value, maxScroll) {\n  var floatValue = parseFloat(value);\n  var unit = value.match(START_END_DURATION_REGEX)[2] || null;\n  var vh = window.innerHeight / 100;\n  var valueInPx = value;\n\n  switch (unit) {\n    case 'vh':\n      valueInPx = vh * floatValue;\n      break;\n\n    case '%':\n      valueInPx = maxScroll * floatValue / 100;\n      break;\n\n    default:\n      valueInPx = floatValue;\n  }\n\n  return valueInPx;\n} // Takes start/end/duration props\n// and return number (in pixels) based on prop type (number, string, dom element)\n\n\nfunction convertPropToPixels(propName, propValue, maxScroll) {\n  var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  var propValueInPx = propValue;\n  var isElement = propValue instanceof HTMLElement;\n  var keyCodes = {\n    ZERO: 48,\n    NINE: 57\n  };\n\n  if (typeof propValue === 'number') {\n    propValueInPx = propValue;\n  } else if (START_END_DURATION_REGEX.test(propValue)) {\n    propValueInPx = getValueInPx(propValue, maxScroll);\n  } else if (isElement || typeof propValue === 'string' && (propValue.charCodeAt(0) < keyCodes.ZERO || propValue.charCodeAt(0) > keyCodes.NINE)) {\n    var element = isElement ? propValue : document.querySelector(propValue);\n\n    if (!element) {\n      console.warn('Plx, ERROR: ' + propName + ' selector matches no elements: \"' + propValue + '\"'); // eslint-disable-line\n\n      return null;\n    }\n\n    if (propName === 'start' || propName === 'end') {\n      // START or END\n      // Element enters the viewport\n      propValueInPx = getElementTop(element) - window.innerHeight;\n    } else if (propName === 'duration') {\n      // DURATION\n      // Height of the element\n      propValueInPx = element.offsetHeight;\n    }\n  } else {\n    console.warn('Plx, ERROR: \"' + propValue + '\" is not a valid ' + propName + ' value, check documenation'); // eslint-disable-line\n\n    return null;\n  } // Transform offset to px\n\n\n  var offsetInPx = 0;\n\n  if (typeof offset === 'number') {\n    offsetInPx = offset;\n  } else if (START_END_DURATION_REGEX.test(offset)) {\n    offsetInPx = getValueInPx(offset, maxScroll);\n  } // Add offset\n\n\n  propValueInPx += offsetInPx;\n\n  if (propValueInPx < 0) {\n    propValueInPx = 0;\n  }\n\n  return propValueInPx;\n} // Convers color in hex format into object { r, g, b, a }\n\n\nfunction hexToObject(hex) {\n  // Convert #abc to #aabbcc\n  var color = hex.length === 4 ? '#' + hex[1] + hex[1] + hex[2] + hex[2] + hex[3] + hex[3] : hex;\n  var result = HEX_REGEX.exec(color); // Safety check, if color is in the wrong format\n\n  if (!result) {\n    console.warn('Plx, ERROR: hex color is not in the right format: \"' + hex + '\"'); // eslint-disable-line no-console\n\n    return null;\n  } // All color functions are returning { r, g, b, a } object\n\n\n  return {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16),\n    a: 1\n  };\n} // Convers color in rgb format into object { r, g, b, a }\n\n\nfunction rgbToObject(rgb) {\n  var isRgba = rgb.toLowerCase().indexOf('rgba') === 0;\n  var color = rgb.replace(/ /g, '');\n  var result = isRgba ? RGBA_REGEX.exec(color) : RGB_REGEX.exec(color); // Safety check, if color is in the wrong format\n\n  if (!result) {\n    console.warn('Plx, ERROR: rgb or rgba color is not in the right format: \"' + rgb + '\"'); // eslint-disable-line\n\n    return null;\n  } // All color functions are returning { r, g, b, a } object\n\n\n  return {\n    r: parseInt(result[1], 10),\n    g: parseInt(result[2], 10),\n    b: parseInt(result[3], 10),\n    a: isRgba ? parseFloat(result[4]) : 1\n  };\n} // Calculates the current value for parallaxing property\n\n\nfunction parallax(scrollPosition, start, duration, startValue, endValue, easing) {\n  var min = startValue;\n  var max = endValue;\n  var invert = startValue > endValue; // Safety check, if \"startValue\" is in the wrong format\n\n  if (typeof startValue !== 'number') {\n    console.warn('Plx, ERROR: startValue is not a number (type: \"' + (typeof endValue === 'undefined' ? 'undefined' : _typeof(endValue)) + '\", value: \"' + endValue + '\")'); // eslint-disable-line\n\n    return null;\n  } // Safety check, if \"endValue\" is in the wrong format\n\n\n  if (typeof endValue !== 'number') {\n    console.warn('Plx, ERROR: endValue is not a number (type: \"' + (typeof endValue === 'undefined' ? 'undefined' : _typeof(endValue)) + '\", value: \"' + endValue + '\")'); // eslint-disable-line\n\n    return null;\n  } // Safety check, if \"duration\" is in the wrong format\n\n\n  if (typeof duration !== 'number' || duration === 0) {\n    console.warn('Plx, ERROR: duration is zero or not a number (type: \"' + (typeof duration === 'undefined' ? 'undefined' : _typeof(duration)) + '\", value: \"' + duration + '\")'); // eslint-disable-line\n\n    return null;\n  }\n\n  if (invert) {\n    min = endValue;\n    max = startValue;\n  }\n\n  var percentage = (scrollPosition - start) / duration;\n\n  if (percentage > 1) {\n    percentage = 1;\n  } else if (percentage < 0) {\n    percentage = 0;\n  } // Apply easing\n\n\n  if (easing) {\n    var easingPropType = typeof easing === 'undefined' ? 'undefined' : _typeof(easing);\n\n    if (easingPropType === 'object' && easing.length === 4) {\n      percentage = (0, _bezierEasing2.default)(easing[0], easing[1], easing[2], easing[3])(percentage);\n    } else if (easingPropType === 'string' && EASINGS[easing]) {\n      percentage = (0, _bezierEasing2.default)(EASINGS[easing][0], EASINGS[easing][1], EASINGS[easing][2], EASINGS[easing][3])(percentage);\n    } else if (easingPropType === 'function') {\n      percentage = easing(percentage);\n    }\n  }\n\n  var value = percentage * (max - min);\n\n  if (invert) {\n    value = max - value;\n  } else {\n    value += min;\n  }\n\n  return parseFloat(value.toFixed(3));\n} // Calculates current value for color parallax\n\n\nfunction colorParallax(scrollPosition, start, duration, startValue, endValue, easing) {\n  var startObject = null;\n  var endObject = null;\n\n  if (startValue[0].toLowerCase() === 'r') {\n    startObject = rgbToObject(startValue);\n  } else {\n    startObject = hexToObject(startValue);\n  }\n\n  if (endValue[0].toLowerCase() === 'r') {\n    endObject = rgbToObject(endValue);\n  } else {\n    endObject = hexToObject(endValue);\n  }\n\n  if (startObject && endObject) {\n    var r = parallax(scrollPosition, start, duration, startObject.r, endObject.r, easing);\n    var g = parallax(scrollPosition, start, duration, startObject.g, endObject.g, easing);\n    var b = parallax(scrollPosition, start, duration, startObject.b, endObject.b, easing);\n    var a = parallax(scrollPosition, start, duration, startObject.a, endObject.a, easing);\n    return 'rgba(' + parseInt(r, 10) + ', ' + parseInt(g, 10) + ', ' + parseInt(b, 10) + ', ' + a + ')';\n  }\n\n  return null;\n} // Applies property parallax to the style object\n\n\nfunction applyProperty(scrollPosition, propertyData, startPosition, duration, style, easing) {\n  var startValue = propertyData.startValue,\n      endValue = propertyData.endValue,\n      property = propertyData.property,\n      unit = propertyData.unit; // If property is one of the color properties\n  // Use it's parallax method\n\n  var isColor = COLOR_PROPERTIES.indexOf(property) > -1;\n  var parallaxMethod = isColor ? colorParallax : parallax; // Get new CSS value\n\n  var value = parallaxMethod(scrollPosition, startPosition, duration, startValue, endValue, easing); // Get transform function\n\n  var transformMethod = TRANSFORM_MAP[property];\n  var filterMethod = FILTER_MAP[property];\n  var newStyle = style;\n\n  if (transformMethod) {\n    // Get CSS unit\n    var propertyUnit = getUnit(property, unit); // Transforms, apply value to transform function\n\n    newStyle.transform[property] = transformMethod(value, propertyUnit);\n  } else if (filterMethod) {\n    // Get CSS unit\n    var _propertyUnit = getUnit(property, unit); // Filters, apply value to filter function\n\n\n    newStyle.filter[property] = filterMethod(value, _propertyUnit);\n  } else {\n    // All other properties\n    newStyle[property] = value; // Add unit if it is passed\n\n    if (unit) {\n      newStyle[property] += unit;\n    }\n  }\n\n  return newStyle;\n} // Returns CSS classes based on animation state\n\n\nfunction getClasses(lastSegmentScrolledBy, isInSegment, parallaxData) {\n  var cssClasses = null;\n\n  if (lastSegmentScrolledBy === null) {\n    cssClasses = 'Plx--above';\n  } else if (lastSegmentScrolledBy === parallaxData.length - 1 && !isInSegment) {\n    cssClasses = 'Plx--below';\n  } else if (lastSegmentScrolledBy !== null && isInSegment) {\n    var segmentName = parallaxData[lastSegmentScrolledBy].name || lastSegmentScrolledBy;\n    cssClasses = 'Plx--active Plx--in Plx--in-' + segmentName;\n  } else if (lastSegmentScrolledBy !== null && !isInSegment) {\n    var _segmentName = parallaxData[lastSegmentScrolledBy].name || lastSegmentScrolledBy;\n\n    var nextSegmentName = parallaxData[lastSegmentScrolledBy + 1].name || lastSegmentScrolledBy + 1;\n    cssClasses = 'Plx--active Plx--between Plx--between-' + _segmentName + '-and-' + nextSegmentName;\n  }\n\n  return cssClasses;\n} // Checks if class contains 'active'\n\n\nfunction checkIfActive(classes) {\n  return classes.includes('Plx--active');\n} // Omits \"keysToOmit\" from \"object\"\n\n\nfunction omit(object, keysToOmit) {\n  var result = {};\n  Object.keys(object).forEach(function (key) {\n    if (keysToOmit.indexOf(key) === -1) {\n      result[key] = object[key];\n    }\n  });\n  return result;\n} // Main update function\n// Returns new state object based on props and scroll position\n\n\nfunction getNewState(scrollPosition, props, state, element) {\n  var animateWhenNotInViewport = props.animateWhenNotInViewport,\n      disabled = props.disabled,\n      freeze = props.freeze,\n      parallaxData = props.parallaxData;\n  var showElement = state.showElement,\n      plxStyle = state.plxStyle,\n      plxStateClasses = state.plxStateClasses; // Do nothing if animation is disabled, frozen\n  // or if element is not rendered yet\n\n  if (freeze && showElement || !element || disabled) {\n    return null;\n  } // Check if element is in viewport\n  // Small offset is added to prevent page jumping\n\n\n  if (!animateWhenNotInViewport) {\n    var rect = element.getBoundingClientRect();\n    var isTopAboveBottomEdge = rect.top < window.innerHeight + SCROLL_OFFSET;\n    var isBottomBelowTopEdge = rect.top + rect.height > -SCROLL_OFFSET;\n\n    if (!isTopAboveBottomEdge || !isBottomBelowTopEdge) {\n      return null;\n    }\n  }\n\n  var newState = {}; // Style to be applied to our element\n\n  var newStyle = {\n    transform: {},\n    filter: {}\n  }; // This means \"componentDidMount\" did happen and that we should show our element\n\n  if (!showElement) {\n    newState.showElement = true;\n  }\n\n  var appliedProperties = [];\n  var segments = [];\n  var isInSegment = false;\n  var lastSegmentScrolledBy = null;\n  var maxScroll = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight) - window.innerHeight;\n\n  var _loop = function _loop(i) {\n    var _parallaxData$i = parallaxData[i],\n        duration = _parallaxData$i.duration,\n        easing = _parallaxData$i.easing,\n        endOffset = _parallaxData$i.endOffset,\n        properties = _parallaxData$i.properties,\n        startOffset = _parallaxData$i.startOffset;\n    var start = parallaxData[i].start === 'self' ? element : parallaxData[i].start;\n    var end = parallaxData[i].end === 'self' ? element : parallaxData[i].end;\n    var startInPx = convertPropToPixels('start', start, maxScroll, startOffset);\n    var durationInPx = null;\n    var endInPx = null; // End has higher priority than duration\n\n    if (typeof end !== 'undefined') {\n      endInPx = convertPropToPixels('end', end, maxScroll, endOffset);\n      durationInPx = endInPx - startInPx;\n    } else {\n      durationInPx = convertPropToPixels('duration', duration, maxScroll);\n      endInPx = startInPx + durationInPx;\n    } // If segment is below scroll position skip it\n\n\n    if (scrollPosition < startInPx) {\n      return 'break';\n    }\n\n    var isScrolledByStart = scrollPosition >= startInPx;\n\n    if (isScrolledByStart) {\n      lastSegmentScrolledBy = i;\n    } // If active segment exists, apply his properties\n\n\n    if (scrollPosition >= startInPx && scrollPosition <= endInPx) {\n      isInSegment = true;\n      properties.forEach(function (propertyData) {\n        // eslint-disable-line no-loop-func\n        var property = propertyData.property; // Save which properties are applied to the active segment\n        // So they are not re-applied for other segments\n\n        appliedProperties.push(property); // Apply property style\n\n        newStyle = applyProperty(scrollPosition, propertyData, startInPx, durationInPx, newStyle, easing);\n      });\n    } else {\n      // Push non active segments above the scroll position to separate array\n      // This way \"durationInPx\" and \"startInPx\" are not calculated again\n      // and segments below scroll position are skipped in the next step\n      segments.push({\n        easing: easing,\n        durationInPx: durationInPx,\n        properties: properties,\n        startInPx: startInPx\n      });\n    }\n  };\n\n  for (var i = 0; i < parallaxData.length; i++) {\n    var _ret = _loop(i);\n\n    if (_ret === 'break') break;\n  } // These are only segments that are completly above scroll position\n\n\n  segments.forEach(function (data) {\n    var easing = data.easing,\n        durationInPx = data.durationInPx,\n        properties = data.properties,\n        startInPx = data.startInPx;\n    properties.forEach(function (propertyData) {\n      var property = propertyData.property; // Skip propery that was changed for active segment\n\n      if (appliedProperties.indexOf(property) > -1) {\n        return;\n      } // These styles that are the ones changed by segments\n      // that are above active segment\n\n\n      newStyle = applyProperty(scrollPosition, propertyData, startInPx, durationInPx, newStyle, easing);\n    });\n  }); // Sort transforms by ORDER_OF_TRANSFORMS\n  // as order of CSS transforms matters\n\n  var transformsOrdered = [];\n  ORDER_OF_TRANSFORMS.forEach(function (transformKey) {\n    if (newStyle.transform[transformKey]) {\n      transformsOrdered.push(newStyle.transform[transformKey]);\n    }\n  }); // Concat transforms and add browser prefixes\n\n  newStyle.transform = transformsOrdered.join(' ');\n  newStyle.WebkitTransform = newStyle.transform;\n  newStyle.MozTransform = newStyle.transform;\n  newStyle.OTransform = newStyle.transform;\n  newStyle.msTransform = newStyle.transform;\n  var filtersArray = [];\n  FILTER_PROPERTIES.forEach(function (filterKey) {\n    if (newStyle.filter[filterKey]) {\n      filtersArray.push(newStyle.filter[filterKey]);\n    }\n  }); // Concat filters and add browser prefixes\n\n  newStyle.filter = filtersArray.join(' ');\n  newStyle.WebkitFilter = newStyle.filter;\n  newStyle.MozFilter = newStyle.filter;\n  newStyle.OFilter = newStyle.filter;\n  newStyle.msFilter = newStyle.filter; // \"Stupid\" check if style should be updated\n\n  if (JSON.stringify(plxStyle) !== JSON.stringify(newStyle)) {\n    newState.plxStyle = newStyle;\n  } // Adding state class\n\n\n  var newPlxStateClasses = getClasses(lastSegmentScrolledBy, isInSegment, parallaxData);\n\n  if (newPlxStateClasses !== plxStateClasses) {\n    newState.plxStateClasses = newPlxStateClasses;\n  }\n\n  if (Object.keys(newState).length) {\n    return newState;\n  }\n\n  return null;\n}\n\nvar Plx = function (_Component) {\n  _inherits(Plx, _Component);\n\n  function Plx(props) {\n    _classCallCheck(this, Plx); // Binding handlers\n\n\n    var _this = _possibleConstructorReturn(this, (Plx.__proto__ || Object.getPrototypeOf(Plx)).call(this, props));\n\n    _this.handleScrollChange = _this.handleScrollChange.bind(_this);\n    _this.handleResize = _this.handleResize.bind(_this);\n    _this.state = {\n      element: null,\n      showElement: false,\n      plxStateClasses: '',\n      plxStyle: {}\n    }; // Skipping type checking as PropTypes will give a warning if the props aren't functions\n\n    _this.plxStartEnabled = _this.props.onPlxStart !== null;\n    _this.plxEndEnabled = _this.props.onPlxEnd !== null;\n    return _this;\n  }\n\n  _createClass(Plx, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Get scroll manager singleton\n      this.scrollManager = new _windowScrollManager2.default(); // Add listeners\n\n      window.addEventListener('window-scroll', this.handleScrollChange);\n      window.addEventListener('resize', this.handleResize);\n      this.update();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var wasActive = checkIfActive(prevState.plxStateClasses);\n      var isActive = checkIfActive(this.state.plxStateClasses);\n\n      if (prevProps !== this.props) {\n        this.update();\n      }\n\n      if ((this.plxStartEnabled || this.plxEndEnabled) && prevState.plxStateClasses !== this.state.plxStateClasses) {\n        if (this.plxStartEnabled && !wasActive && isActive) {\n          this.props.onPlxStart();\n        } else if (this.plxEndEnabled && wasActive && !isActive) {\n          this.props.onPlxEnd();\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      window.removeEventListener('window-scroll', this.handleScrollChange);\n      window.removeEventListener('resize', this.handleResize);\n      clearTimeout(this.resizeDebounceTimeoutID);\n      this.resizeDebounceTimeoutID = null;\n\n      if (this.scrollManager) {\n        this.scrollManager.removeListener();\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this2 = this;\n\n      var scrollPosition = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var currentScrollPosition = scrollPosition === null ? this.scrollManager.getScrollPosition().scrollPositionY : scrollPosition;\n      var newState = getNewState(currentScrollPosition, this.props, this.state, this.element);\n\n      if (newState) {\n        requestAnimationFrame(function () {\n          return _this2.setState(newState);\n        });\n      }\n    }\n  }, {\n    key: 'handleResize',\n    value: function handleResize() {\n      var _this3 = this;\n\n      clearTimeout(this.resizeDebounceTimeoutID);\n      this.resizeDebounceTimeoutID = setTimeout(function () {\n        _this3.update();\n      }, RESIZE_DEBOUNCE_TIMEOUT);\n    }\n  }, {\n    key: 'handleScrollChange',\n    value: function handleScrollChange(e) {\n      this.update(e.detail.scrollPositionY);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props = this.props,\n          children = _props.children,\n          className = _props.className,\n          disabled = _props.disabled,\n          style = _props.style,\n          tagName = _props.tagName;\n      var _state = this.state,\n          showElement = _state.showElement,\n          plxStyle = _state.plxStyle,\n          plxStateClasses = _state.plxStateClasses;\n      var Tag = tagName;\n      var elementStyle = style;\n\n      if (!disabled) {\n        elementStyle = _extends({}, style, plxStyle, {\n          // Hide element before until it is rendered\n          // This prevents jumps if page is scrolled and then refreshed\n          visibility: showElement ? null : 'hidden'\n        });\n      }\n\n      return _react2.default.createElement(Tag, _extends({}, omit(this.props, PROPS_TO_OMIT), {\n        className: 'Plx ' + plxStateClasses + ' ' + className,\n        style: elementStyle,\n        ref: function ref(el) {\n          return _this4.element = el;\n        }\n      }), children);\n    }\n  }]);\n\n  return Plx;\n}(_react.Component);\n\nexports.default = Plx;\n\nvar propertiesItemType = _propTypes2.default.shape({\n  startValue: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]).isRequired,\n  endValue: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]).isRequired,\n  property: _propTypes2.default.string.isRequired,\n  unit: _propTypes2.default.string\n}); // Check for the universal rendering\n// HTMLElement in the proptypes breaks on server\n// https://github.com/Stanko/react-plx/issues/25\n\n\nvar SafeHTMLElement = WINDOW_EXISTS ? window.HTMLElement : {};\n\nvar parallaxDataType = _propTypes2.default.shape({\n  start: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number, _propTypes2.default.instanceOf(SafeHTMLElement)]).isRequired,\n  startOffset: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  duration: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number, _propTypes2.default.instanceOf(SafeHTMLElement)]),\n  end: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number, _propTypes2.default.instanceOf(SafeHTMLElement)]),\n  endOffset: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  properties: _propTypes2.default.arrayOf(propertiesItemType).isRequired,\n  easing: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array, _propTypes2.default.func]),\n  name: _propTypes2.default.string\n});\n\nPlx.propTypes = {\n  animateWhenNotInViewport: _propTypes2.default.bool,\n  children: _propTypes2.default.any,\n  className: _propTypes2.default.string,\n  disabled: _propTypes2.default.bool,\n  freeze: _propTypes2.default.bool,\n  parallaxData: _propTypes2.default.arrayOf(parallaxDataType),\n  style: _propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number, _propTypes2.default.object])),\n  tagName: _propTypes2.default.string,\n  onPlxStart: _propTypes2.default.func,\n  onPlxEnd: _propTypes2.default.func\n};\nPlx.defaultProps = {\n  animateWhenNotInViewport: false,\n  children: null,\n  className: '',\n  disabled: false,\n  freeze: false,\n  parallaxData: [],\n  style: {},\n  tagName: 'div',\n  onPlxStart: null,\n  onPlxEnd: null\n};","map":{"version":3,"sources":["/Users/williamlab/Desktop/jocotepec/Saasland_React/node_modules/react-plx/lib/Plx.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_typeof","Symbol","iterator","obj","constructor","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_bezierEasing","_bezierEasing2","_windowScrollManager","_windowScrollManager2","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","WINDOW_EXISTS","window","START_END_DURATION_REGEX","DEFAULT_UNIT","DEFAULT_ANGLE_UNIT","ANGLE_PROPERTIES","EASINGS","ease","easeIn","easeOut","easeInOut","easeInSine","easeOutSine","easeInOutSine","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","REGEX_0_255","REGEX_0_1","REGEX_TWO_HEX_DIGITS","HEX_REGEX","RegExp","RGB_REGEX","RGBA_REGEX","SCROLL_OFFSET","RESIZE_DEBOUNCE_TIMEOUT","TRANSFORM_MAP","rotate","unit","undefined","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","skewZ","translateX","translateY","translateZ","ORDER_OF_TRANSFORMS","COLOR_PROPERTIES","FILTER_MAP","blur","brightness","contrast","grayscale","hueRotate","invert","opacityFilter","saturate","sepia","FILTER_PROPERTIES","PROPS_TO_OMIT","getElementTop","el","top","element","offsetTop","offsetParent","getUnit","property","propertyUnit","indexOf","getValueInPx","maxScroll","floatValue","parseFloat","match","vh","innerHeight","valueInPx","convertPropToPixels","propName","propValue","offset","propValueInPx","isElement","HTMLElement","keyCodes","ZERO","NINE","test","charCodeAt","document","querySelector","console","warn","offsetHeight","offsetInPx","hexToObject","hex","color","result","exec","r","parseInt","g","b","a","rgbToObject","rgb","isRgba","toLowerCase","replace","parallax","scrollPosition","start","duration","startValue","endValue","easing","min","max","percentage","easingPropType","toFixed","colorParallax","startObject","endObject","applyProperty","propertyData","startPosition","style","isColor","parallaxMethod","transformMethod","filterMethod","newStyle","transform","_propertyUnit","filter","getClasses","lastSegmentScrolledBy","isInSegment","parallaxData","cssClasses","segmentName","name","_segmentName","nextSegmentName","checkIfActive","classes","includes","omit","object","keysToOmit","keys","forEach","getNewState","state","animateWhenNotInViewport","disabled","freeze","showElement","plxStyle","plxStateClasses","rect","getBoundingClientRect","isTopAboveBottomEdge","isBottomBelowTopEdge","height","newState","appliedProperties","segments","Math","body","scrollHeight","documentElement","clientHeight","_loop","_parallaxData$i","endOffset","properties","startOffset","end","startInPx","durationInPx","endInPx","isScrolledByStart","push","_ret","data","transformsOrdered","transformKey","join","WebkitTransform","MozTransform","OTransform","msTransform","filtersArray","filterKey","WebkitFilter","MozFilter","OFilter","msFilter","JSON","stringify","newPlxStateClasses","Plx","_Component","_this","getPrototypeOf","handleScrollChange","bind","handleResize","plxStartEnabled","onPlxStart","plxEndEnabled","onPlxEnd","componentDidMount","scrollManager","addEventListener","update","componentDidUpdate","prevProps","prevState","wasActive","isActive","componentWillUnmount","removeEventListener","clearTimeout","resizeDebounceTimeoutID","removeListener","_this2","currentScrollPosition","getScrollPosition","scrollPositionY","requestAnimationFrame","setState","_this3","setTimeout","e","detail","render","_this4","_props","children","className","tagName","_state","Tag","elementStyle","visibility","createElement","ref","Component","propertiesItemType","shape","oneOfType","string","number","isRequired","SafeHTMLElement","parallaxDataType","instanceOf","arrayOf","array","func","propTypes","bool","any","objectOf","defaultProps"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _bezierEasing = require('bezier-easing');\n\nvar _bezierEasing2 = _interopRequireDefault(_bezierEasing);\n\nvar _windowScrollManager = require('window-scroll-manager');\n\nvar _windowScrollManager2 = _interopRequireDefault(_windowScrollManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// Check if code is running in the browser (important for universal rendering)\nvar WINDOW_EXISTS = typeof window !== 'undefined';\n\n// Regex that checks for numbers in string\n// formatted as \"{number}{unit}\" where unit is \"px\", \"vh\", \"%\" or none\nvar START_END_DURATION_REGEX = /^-?\\d+(\\.\\d+)?(px|vh|%)?$/;\n\nvar DEFAULT_UNIT = 'px';\nvar DEFAULT_ANGLE_UNIT = 'deg';\nvar ANGLE_PROPERTIES = ['rotate', 'rotateX', 'rotateY', 'rotateZ', 'skew', 'skewX', 'skewY', 'skewZ', 'hueRotate'];\n\nvar EASINGS = {\n  ease: [0.25, 0.1, 0.25, 1.0],\n  easeIn: [0.42, 0.0, 1.00, 1.0],\n  easeOut: [0.00, 0.0, 0.58, 1.0],\n  easeInOut: [0.42, 0.0, 0.58, 1.0],\n  easeInSine: [0.47, 0, 0.745, 0.715],\n  easeOutSine: [0.39, 0.575, 0.565, 1],\n  easeInOutSine: [0.445, 0.05, 0.55, 0.95],\n  easeInQuad: [0.55, 0.085, 0.68, 0.53],\n  easeOutQuad: [0.25, 0.46, 0.45, 0.94],\n  easeInOutQuad: [0.455, 0.03, 0.515, 0.955],\n  easeInCubic: [0.55, 0.055, 0.675, 0.19],\n  easeOutCubic: [0.215, 0.61, 0.355, 1],\n  easeInOutCubic: [0.645, 0.045, 0.355, 1],\n  easeInQuart: [0.895, 0.03, 0.685, 0.22],\n  easeOutQuart: [0.165, 0.84, 0.44, 1],\n  easeInOutQuart: [0.77, 0, 0.175, 1],\n  easeInQuint: [0.755, 0.05, 0.855, 0.06],\n  easeOutQuint: [0.23, 1, 0.32, 1],\n  easeInOutQuint: [0.86, 0, 0.07, 1],\n  easeInExpo: [0.95, 0.05, 0.795, 0.035],\n  easeOutExpo: [0.19, 1, 0.22, 1],\n  easeInOutExpo: [1, 0, 0, 1],\n  easeInCirc: [0.6, 0.04, 0.98, 0.335],\n  easeOutCirc: [0.075, 0.82, 0.165, 1],\n  easeInOutCirc: [0.785, 0.135, 0.15, 0.86]\n};\n\n// Color regexes\n\n// 0 - 199 | 200 - 249 | 250 - 255\nvar REGEX_0_255 = '(1?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])';\n// 0.0 - 1.9999...\nvar REGEX_0_1 = '([01](\\\\.\\\\d+)?)';\n// 00 - FF\nvar REGEX_TWO_HEX_DIGITS = '([a-f\\\\d]{2})';\n\nvar HEX_REGEX = new RegExp('^#' + REGEX_TWO_HEX_DIGITS + REGEX_TWO_HEX_DIGITS + REGEX_TWO_HEX_DIGITS + '$', 'i');\nvar RGB_REGEX = new RegExp('^rgb\\\\(' + REGEX_0_255 + ',' + REGEX_0_255 + ',' + REGEX_0_255 + '\\\\)$', 'i');\nvar RGBA_REGEX = new RegExp('^rgba\\\\(' + REGEX_0_255 + ',' + REGEX_0_255 + ',' + REGEX_0_255 + ',' + REGEX_0_1 + '\\\\)$', 'i');\n\nvar SCROLL_OFFSET = 50;\n\nvar RESIZE_DEBOUNCE_TIMEOUT = 150;\n\n// CSS transform map\nvar TRANSFORM_MAP = {\n  rotate: function rotate(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ANGLE_UNIT;\n    return 'rotate(' + value + unit + ')';\n  },\n  rotateX: function rotateX(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ANGLE_UNIT;\n    return 'rotateX(' + value + unit + ')';\n  },\n  rotateY: function rotateY(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ANGLE_UNIT;\n    return 'rotateY(' + value + unit + ')';\n  },\n  rotateZ: function rotateZ(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ANGLE_UNIT;\n    return 'rotateZ(' + value + unit + ')';\n  },\n  scale: function scale(value) {\n    return 'scale(' + value + ')';\n  },\n  scaleX: function scaleX(value) {\n    return 'scaleX(' + value + ')';\n  },\n  scaleY: function scaleY(value) {\n    return 'scaleY(' + value + ')';\n  },\n  scaleZ: function scaleZ(value) {\n    return 'scaleZ(' + value + ')';\n  },\n  skew: function skew(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'skew(' + value + unit + ')';\n  },\n  skewX: function skewX(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'skewX(' + value + unit + ')';\n  },\n  skewY: function skewY(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'skewY(' + value + unit + ')';\n  },\n  skewZ: function skewZ(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'skewZ(' + value + unit + ')';\n  },\n  translateX: function translateX(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'translateX(' + value + unit + ')';\n  },\n  translateY: function translateY(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'translateY(' + value + unit + ')';\n  },\n  translateZ: function translateZ(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'translateZ(' + value + unit + ')';\n  }\n};\n\n// Order of CSS transforms matters\nvar ORDER_OF_TRANSFORMS = ['translateX', 'translateY', 'translateZ', 'skew', 'skewX', 'skewY', 'skewZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ'];\n\n// CSS properties that use color values\nvar COLOR_PROPERTIES = ['backgroundColor', 'borderBottomColor', 'borderColor', 'borderLeftColor', 'borderRightColor', 'borderTopColor', 'color', 'fill', 'stroke'];\n\n// CSS filter map\n// blur()\n// brightness()\n// contrast()\n// grayscale()\n// hue-rotate()\n// invert()\n// opacity() // use opacityFilter\n// saturate()\n// sepia()\n\n// Not supported\n// drop-shadow()\n// url()\nvar FILTER_MAP = {\n  blur: function blur(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_UNIT;\n    return 'blur(' + value + unit + ')';\n  },\n  brightness: function brightness(value) {\n    return 'brightness(' + value + ')';\n  },\n  contrast: function contrast(value) {\n    return 'contrast(' + value + ')';\n  },\n  grayscale: function grayscale(value) {\n    return 'grayscale(' + value + ')';\n  },\n  hueRotate: function hueRotate(value) {\n    var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ANGLE_UNIT;\n    return 'hue-rotate(' + value + unit + ')';\n  },\n  invert: function invert(value) {\n    return 'invert(' + value + ')';\n  },\n  opacityFilter: function opacityFilter(value) {\n    return 'opacity(' + value + ')';\n  },\n  saturate: function saturate(value) {\n    return 'saturate(' + value + ')';\n  },\n  sepia: function sepia(value) {\n    return 'sepia(' + value + ')';\n  }\n};\n\nvar FILTER_PROPERTIES = ['blur', 'brightness', 'contrast', 'grayscale', 'hueRotate', 'invert', 'opacityFilter', 'saturate', 'sepia'];\n\n// Props to be removed from passing directly to the component element\nvar PROPS_TO_OMIT = ['animateWhenNotInViewport', 'children', 'className', 'freeze', 'parallaxData', 'style', 'tagName', 'onPlxStart', 'onPlxEnd'];\n\n// Get element's top offset\nfunction getElementTop(el) {\n  var top = 0;\n  var element = el;\n\n  do {\n    top += element.offsetTop || 0;\n    element = element.offsetParent;\n  } while (element);\n\n  return top;\n}\n\n// Returns CSS unit\nfunction getUnit(property, unit) {\n  var propertyUnit = unit || DEFAULT_UNIT;\n\n  if (ANGLE_PROPERTIES.indexOf(property) >= 0) {\n    propertyUnit = unit || DEFAULT_ANGLE_UNIT;\n  }\n\n  return propertyUnit;\n}\n\n// Takes string value (in px/vh/%) and returns number\nfunction getValueInPx(value, maxScroll) {\n  var floatValue = parseFloat(value);\n  var unit = value.match(START_END_DURATION_REGEX)[2] || null;\n  var vh = window.innerHeight / 100;\n  var valueInPx = value;\n\n  switch (unit) {\n    case 'vh':\n      valueInPx = vh * floatValue;\n      break;\n    case '%':\n      valueInPx = maxScroll * floatValue / 100;\n      break;\n    default:\n      valueInPx = floatValue;\n  }\n\n  return valueInPx;\n}\n\n// Takes start/end/duration props\n// and return number (in pixels) based on prop type (number, string, dom element)\nfunction convertPropToPixels(propName, propValue, maxScroll) {\n  var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n  var propValueInPx = propValue;\n  var isElement = propValue instanceof HTMLElement;\n  var keyCodes = {\n    ZERO: 48,\n    NINE: 57\n  };\n\n  if (typeof propValue === 'number') {\n    propValueInPx = propValue;\n  } else if (START_END_DURATION_REGEX.test(propValue)) {\n    propValueInPx = getValueInPx(propValue, maxScroll);\n  } else if (isElement || typeof propValue === 'string' && (propValue.charCodeAt(0) < keyCodes.ZERO || propValue.charCodeAt(0) > keyCodes.NINE)) {\n    var element = isElement ? propValue : document.querySelector(propValue);\n\n    if (!element) {\n      console.warn('Plx, ERROR: ' + propName + ' selector matches no elements: \"' + propValue + '\"'); // eslint-disable-line\n      return null;\n    }\n\n    if (propName === 'start' || propName === 'end') {\n      // START or END\n      // Element enters the viewport\n      propValueInPx = getElementTop(element) - window.innerHeight;\n    } else if (propName === 'duration') {\n      // DURATION\n      // Height of the element\n      propValueInPx = element.offsetHeight;\n    }\n  } else {\n    console.warn('Plx, ERROR: \"' + propValue + '\" is not a valid ' + propName + ' value, check documenation'); // eslint-disable-line\n    return null;\n  }\n\n  // Transform offset to px\n  var offsetInPx = 0;\n\n  if (typeof offset === 'number') {\n    offsetInPx = offset;\n  } else if (START_END_DURATION_REGEX.test(offset)) {\n    offsetInPx = getValueInPx(offset, maxScroll);\n  }\n  // Add offset\n  propValueInPx += offsetInPx;\n\n  if (propValueInPx < 0) {\n    propValueInPx = 0;\n  }\n\n  return propValueInPx;\n}\n\n// Convers color in hex format into object { r, g, b, a }\nfunction hexToObject(hex) {\n  // Convert #abc to #aabbcc\n  var color = hex.length === 4 ? '#' + hex[1] + hex[1] + hex[2] + hex[2] + hex[3] + hex[3] : hex;\n  var result = HEX_REGEX.exec(color);\n\n  // Safety check, if color is in the wrong format\n  if (!result) {\n    console.warn('Plx, ERROR: hex color is not in the right format: \"' + hex + '\"'); // eslint-disable-line no-console\n    return null;\n  }\n\n  // All color functions are returning { r, g, b, a } object\n  return {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16),\n    a: 1\n  };\n}\n\n// Convers color in rgb format into object { r, g, b, a }\nfunction rgbToObject(rgb) {\n  var isRgba = rgb.toLowerCase().indexOf('rgba') === 0;\n  var color = rgb.replace(/ /g, '');\n  var result = isRgba ? RGBA_REGEX.exec(color) : RGB_REGEX.exec(color);\n\n  // Safety check, if color is in the wrong format\n  if (!result) {\n    console.warn('Plx, ERROR: rgb or rgba color is not in the right format: \"' + rgb + '\"'); // eslint-disable-line\n    return null;\n  }\n\n  // All color functions are returning { r, g, b, a } object\n  return {\n    r: parseInt(result[1], 10),\n    g: parseInt(result[2], 10),\n    b: parseInt(result[3], 10),\n    a: isRgba ? parseFloat(result[4]) : 1\n  };\n}\n\n// Calculates the current value for parallaxing property\nfunction parallax(scrollPosition, start, duration, startValue, endValue, easing) {\n  var min = startValue;\n  var max = endValue;\n  var invert = startValue > endValue;\n\n  // Safety check, if \"startValue\" is in the wrong format\n  if (typeof startValue !== 'number') {\n    console.warn('Plx, ERROR: startValue is not a number (type: \"' + (typeof endValue === 'undefined' ? 'undefined' : _typeof(endValue)) + '\", value: \"' + endValue + '\")'); // eslint-disable-line\n    return null;\n  }\n\n  // Safety check, if \"endValue\" is in the wrong format\n  if (typeof endValue !== 'number') {\n    console.warn('Plx, ERROR: endValue is not a number (type: \"' + (typeof endValue === 'undefined' ? 'undefined' : _typeof(endValue)) + '\", value: \"' + endValue + '\")'); // eslint-disable-line\n    return null;\n  }\n\n  // Safety check, if \"duration\" is in the wrong format\n  if (typeof duration !== 'number' || duration === 0) {\n    console.warn('Plx, ERROR: duration is zero or not a number (type: \"' + (typeof duration === 'undefined' ? 'undefined' : _typeof(duration)) + '\", value: \"' + duration + '\")'); // eslint-disable-line\n    return null;\n  }\n\n  if (invert) {\n    min = endValue;\n    max = startValue;\n  }\n\n  var percentage = (scrollPosition - start) / duration;\n\n  if (percentage > 1) {\n    percentage = 1;\n  } else if (percentage < 0) {\n    percentage = 0;\n  }\n\n  // Apply easing\n  if (easing) {\n    var easingPropType = typeof easing === 'undefined' ? 'undefined' : _typeof(easing);\n    if (easingPropType === 'object' && easing.length === 4) {\n      percentage = (0, _bezierEasing2.default)(easing[0], easing[1], easing[2], easing[3])(percentage);\n    } else if (easingPropType === 'string' && EASINGS[easing]) {\n      percentage = (0, _bezierEasing2.default)(EASINGS[easing][0], EASINGS[easing][1], EASINGS[easing][2], EASINGS[easing][3])(percentage);\n    } else if (easingPropType === 'function') {\n      percentage = easing(percentage);\n    }\n  }\n\n  var value = percentage * (max - min);\n\n  if (invert) {\n    value = max - value;\n  } else {\n    value += min;\n  }\n\n  return parseFloat(value.toFixed(3));\n}\n\n// Calculates current value for color parallax\nfunction colorParallax(scrollPosition, start, duration, startValue, endValue, easing) {\n  var startObject = null;\n  var endObject = null;\n\n  if (startValue[0].toLowerCase() === 'r') {\n    startObject = rgbToObject(startValue);\n  } else {\n    startObject = hexToObject(startValue);\n  }\n\n  if (endValue[0].toLowerCase() === 'r') {\n    endObject = rgbToObject(endValue);\n  } else {\n    endObject = hexToObject(endValue);\n  }\n\n  if (startObject && endObject) {\n    var r = parallax(scrollPosition, start, duration, startObject.r, endObject.r, easing);\n    var g = parallax(scrollPosition, start, duration, startObject.g, endObject.g, easing);\n    var b = parallax(scrollPosition, start, duration, startObject.b, endObject.b, easing);\n    var a = parallax(scrollPosition, start, duration, startObject.a, endObject.a, easing);\n\n    return 'rgba(' + parseInt(r, 10) + ', ' + parseInt(g, 10) + ', ' + parseInt(b, 10) + ', ' + a + ')';\n  }\n\n  return null;\n}\n\n// Applies property parallax to the style object\nfunction applyProperty(scrollPosition, propertyData, startPosition, duration, style, easing) {\n  var startValue = propertyData.startValue,\n      endValue = propertyData.endValue,\n      property = propertyData.property,\n      unit = propertyData.unit;\n\n  // If property is one of the color properties\n  // Use it's parallax method\n\n  var isColor = COLOR_PROPERTIES.indexOf(property) > -1;\n  var parallaxMethod = isColor ? colorParallax : parallax;\n\n  // Get new CSS value\n  var value = parallaxMethod(scrollPosition, startPosition, duration, startValue, endValue, easing);\n\n  // Get transform function\n  var transformMethod = TRANSFORM_MAP[property];\n  var filterMethod = FILTER_MAP[property];\n  var newStyle = style;\n\n  if (transformMethod) {\n    // Get CSS unit\n    var propertyUnit = getUnit(property, unit);\n    // Transforms, apply value to transform function\n    newStyle.transform[property] = transformMethod(value, propertyUnit);\n  } else if (filterMethod) {\n    // Get CSS unit\n    var _propertyUnit = getUnit(property, unit);\n    // Filters, apply value to filter function\n    newStyle.filter[property] = filterMethod(value, _propertyUnit);\n  } else {\n    // All other properties\n    newStyle[property] = value;\n\n    // Add unit if it is passed\n    if (unit) {\n      newStyle[property] += unit;\n    }\n  }\n\n  return newStyle;\n}\n\n// Returns CSS classes based on animation state\nfunction getClasses(lastSegmentScrolledBy, isInSegment, parallaxData) {\n  var cssClasses = null;\n\n  if (lastSegmentScrolledBy === null) {\n    cssClasses = 'Plx--above';\n  } else if (lastSegmentScrolledBy === parallaxData.length - 1 && !isInSegment) {\n    cssClasses = 'Plx--below';\n  } else if (lastSegmentScrolledBy !== null && isInSegment) {\n    var segmentName = parallaxData[lastSegmentScrolledBy].name || lastSegmentScrolledBy;\n\n    cssClasses = 'Plx--active Plx--in Plx--in-' + segmentName;\n  } else if (lastSegmentScrolledBy !== null && !isInSegment) {\n    var _segmentName = parallaxData[lastSegmentScrolledBy].name || lastSegmentScrolledBy;\n    var nextSegmentName = parallaxData[lastSegmentScrolledBy + 1].name || lastSegmentScrolledBy + 1;\n\n    cssClasses = 'Plx--active Plx--between Plx--between-' + _segmentName + '-and-' + nextSegmentName;\n  }\n\n  return cssClasses;\n}\n\n// Checks if class contains 'active'\nfunction checkIfActive(classes) {\n  return classes.includes('Plx--active');\n}\n\n// Omits \"keysToOmit\" from \"object\"\nfunction omit(object, keysToOmit) {\n  var result = {};\n\n  Object.keys(object).forEach(function (key) {\n    if (keysToOmit.indexOf(key) === -1) {\n      result[key] = object[key];\n    }\n  });\n\n  return result;\n}\n\n// Main update function\n// Returns new state object based on props and scroll position\nfunction getNewState(scrollPosition, props, state, element) {\n  var animateWhenNotInViewport = props.animateWhenNotInViewport,\n      disabled = props.disabled,\n      freeze = props.freeze,\n      parallaxData = props.parallaxData;\n  var showElement = state.showElement,\n      plxStyle = state.plxStyle,\n      plxStateClasses = state.plxStateClasses;\n\n  // Do nothing if animation is disabled, frozen\n  // or if element is not rendered yet\n\n  if (freeze && showElement || !element || disabled) {\n    return null;\n  }\n\n  // Check if element is in viewport\n  // Small offset is added to prevent page jumping\n  if (!animateWhenNotInViewport) {\n    var rect = element.getBoundingClientRect();\n    var isTopAboveBottomEdge = rect.top < window.innerHeight + SCROLL_OFFSET;\n    var isBottomBelowTopEdge = rect.top + rect.height > -SCROLL_OFFSET;\n\n    if (!isTopAboveBottomEdge || !isBottomBelowTopEdge) {\n      return null;\n    }\n  }\n\n  var newState = {};\n\n  // Style to be applied to our element\n  var newStyle = {\n    transform: {},\n    filter: {}\n  };\n\n  // This means \"componentDidMount\" did happen and that we should show our element\n  if (!showElement) {\n    newState.showElement = true;\n  }\n\n  var appliedProperties = [];\n  var segments = [];\n  var isInSegment = false;\n  var lastSegmentScrolledBy = null;\n  var maxScroll = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight) - window.innerHeight;\n\n  var _loop = function _loop(i) {\n    var _parallaxData$i = parallaxData[i],\n        duration = _parallaxData$i.duration,\n        easing = _parallaxData$i.easing,\n        endOffset = _parallaxData$i.endOffset,\n        properties = _parallaxData$i.properties,\n        startOffset = _parallaxData$i.startOffset;\n\n\n    var start = parallaxData[i].start === 'self' ? element : parallaxData[i].start;\n    var end = parallaxData[i].end === 'self' ? element : parallaxData[i].end;\n\n    var startInPx = convertPropToPixels('start', start, maxScroll, startOffset);\n    var durationInPx = null;\n    var endInPx = null;\n\n    // End has higher priority than duration\n    if (typeof end !== 'undefined') {\n      endInPx = convertPropToPixels('end', end, maxScroll, endOffset);\n      durationInPx = endInPx - startInPx;\n    } else {\n      durationInPx = convertPropToPixels('duration', duration, maxScroll);\n      endInPx = startInPx + durationInPx;\n    }\n\n    // If segment is below scroll position skip it\n    if (scrollPosition < startInPx) {\n      return 'break';\n    }\n\n    var isScrolledByStart = scrollPosition >= startInPx;\n\n    if (isScrolledByStart) {\n      lastSegmentScrolledBy = i;\n    }\n\n    // If active segment exists, apply his properties\n    if (scrollPosition >= startInPx && scrollPosition <= endInPx) {\n      isInSegment = true;\n\n      properties.forEach(function (propertyData) {\n        // eslint-disable-line no-loop-func\n        var property = propertyData.property;\n\n        // Save which properties are applied to the active segment\n        // So they are not re-applied for other segments\n\n        appliedProperties.push(property);\n\n        // Apply property style\n        newStyle = applyProperty(scrollPosition, propertyData, startInPx, durationInPx, newStyle, easing);\n      });\n    } else {\n      // Push non active segments above the scroll position to separate array\n      // This way \"durationInPx\" and \"startInPx\" are not calculated again\n      // and segments below scroll position are skipped in the next step\n      segments.push({\n        easing: easing,\n        durationInPx: durationInPx,\n        properties: properties,\n        startInPx: startInPx\n      });\n    }\n  };\n\n  for (var i = 0; i < parallaxData.length; i++) {\n    var _ret = _loop(i);\n\n    if (_ret === 'break') break;\n  }\n\n  // These are only segments that are completly above scroll position\n  segments.forEach(function (data) {\n    var easing = data.easing,\n        durationInPx = data.durationInPx,\n        properties = data.properties,\n        startInPx = data.startInPx;\n\n\n    properties.forEach(function (propertyData) {\n      var property = propertyData.property;\n\n      // Skip propery that was changed for active segment\n\n      if (appliedProperties.indexOf(property) > -1) {\n        return;\n      }\n\n      // These styles that are the ones changed by segments\n      // that are above active segment\n      newStyle = applyProperty(scrollPosition, propertyData, startInPx, durationInPx, newStyle, easing);\n    });\n  });\n\n  // Sort transforms by ORDER_OF_TRANSFORMS\n  // as order of CSS transforms matters\n  var transformsOrdered = [];\n\n  ORDER_OF_TRANSFORMS.forEach(function (transformKey) {\n    if (newStyle.transform[transformKey]) {\n      transformsOrdered.push(newStyle.transform[transformKey]);\n    }\n  });\n\n  // Concat transforms and add browser prefixes\n  newStyle.transform = transformsOrdered.join(' ');\n  newStyle.WebkitTransform = newStyle.transform;\n  newStyle.MozTransform = newStyle.transform;\n  newStyle.OTransform = newStyle.transform;\n  newStyle.msTransform = newStyle.transform;\n\n  var filtersArray = [];\n  FILTER_PROPERTIES.forEach(function (filterKey) {\n    if (newStyle.filter[filterKey]) {\n      filtersArray.push(newStyle.filter[filterKey]);\n    }\n  });\n\n  // Concat filters and add browser prefixes\n  newStyle.filter = filtersArray.join(' ');\n  newStyle.WebkitFilter = newStyle.filter;\n  newStyle.MozFilter = newStyle.filter;\n  newStyle.OFilter = newStyle.filter;\n  newStyle.msFilter = newStyle.filter;\n\n  // \"Stupid\" check if style should be updated\n  if (JSON.stringify(plxStyle) !== JSON.stringify(newStyle)) {\n    newState.plxStyle = newStyle;\n  }\n\n  // Adding state class\n  var newPlxStateClasses = getClasses(lastSegmentScrolledBy, isInSegment, parallaxData);\n\n  if (newPlxStateClasses !== plxStateClasses) {\n    newState.plxStateClasses = newPlxStateClasses;\n  }\n\n  if (Object.keys(newState).length) {\n    return newState;\n  }\n\n  return null;\n}\n\nvar Plx = function (_Component) {\n  _inherits(Plx, _Component);\n\n  function Plx(props) {\n    _classCallCheck(this, Plx);\n\n    // Binding handlers\n    var _this = _possibleConstructorReturn(this, (Plx.__proto__ || Object.getPrototypeOf(Plx)).call(this, props));\n\n    _this.handleScrollChange = _this.handleScrollChange.bind(_this);\n    _this.handleResize = _this.handleResize.bind(_this);\n\n    _this.state = {\n      element: null,\n      showElement: false,\n      plxStateClasses: '',\n      plxStyle: {}\n    };\n\n    // Skipping type checking as PropTypes will give a warning if the props aren't functions\n    _this.plxStartEnabled = _this.props.onPlxStart !== null;\n    _this.plxEndEnabled = _this.props.onPlxEnd !== null;\n    return _this;\n  }\n\n  _createClass(Plx, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // Get scroll manager singleton\n      this.scrollManager = new _windowScrollManager2.default();\n      // Add listeners\n      window.addEventListener('window-scroll', this.handleScrollChange);\n      window.addEventListener('resize', this.handleResize);\n\n      this.update();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var wasActive = checkIfActive(prevState.plxStateClasses);\n      var isActive = checkIfActive(this.state.plxStateClasses);\n      if (prevProps !== this.props) {\n        this.update();\n      }\n      if ((this.plxStartEnabled || this.plxEndEnabled) && prevState.plxStateClasses !== this.state.plxStateClasses) {\n        if (this.plxStartEnabled && !wasActive && isActive) {\n          this.props.onPlxStart();\n        } else if (this.plxEndEnabled && wasActive && !isActive) {\n          this.props.onPlxEnd();\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      window.removeEventListener('window-scroll', this.handleScrollChange);\n      window.removeEventListener('resize', this.handleResize);\n\n      clearTimeout(this.resizeDebounceTimeoutID);\n      this.resizeDebounceTimeoutID = null;\n\n      if (this.scrollManager) {\n        this.scrollManager.removeListener();\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this2 = this;\n\n      var scrollPosition = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      var currentScrollPosition = scrollPosition === null ? this.scrollManager.getScrollPosition().scrollPositionY : scrollPosition;\n\n      var newState = getNewState(currentScrollPosition, this.props, this.state, this.element);\n\n      if (newState) {\n        requestAnimationFrame(function () {\n          return _this2.setState(newState);\n        });\n      }\n    }\n  }, {\n    key: 'handleResize',\n    value: function handleResize() {\n      var _this3 = this;\n\n      clearTimeout(this.resizeDebounceTimeoutID);\n      this.resizeDebounceTimeoutID = setTimeout(function () {\n        _this3.update();\n      }, RESIZE_DEBOUNCE_TIMEOUT);\n    }\n  }, {\n    key: 'handleScrollChange',\n    value: function handleScrollChange(e) {\n      this.update(e.detail.scrollPositionY);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props = this.props,\n          children = _props.children,\n          className = _props.className,\n          disabled = _props.disabled,\n          style = _props.style,\n          tagName = _props.tagName;\n      var _state = this.state,\n          showElement = _state.showElement,\n          plxStyle = _state.plxStyle,\n          plxStateClasses = _state.plxStateClasses;\n\n\n      var Tag = tagName;\n\n      var elementStyle = style;\n\n      if (!disabled) {\n        elementStyle = _extends({}, style, plxStyle, {\n          // Hide element before until it is rendered\n          // This prevents jumps if page is scrolled and then refreshed\n          visibility: showElement ? null : 'hidden'\n        });\n      }\n\n      return _react2.default.createElement(\n        Tag,\n        _extends({}, omit(this.props, PROPS_TO_OMIT), {\n          className: 'Plx ' + plxStateClasses + ' ' + className,\n          style: elementStyle,\n          ref: function ref(el) {\n            return _this4.element = el;\n          }\n        }),\n        children\n      );\n    }\n  }]);\n\n  return Plx;\n}(_react.Component);\n\nexports.default = Plx;\n\n\nvar propertiesItemType = _propTypes2.default.shape({\n  startValue: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]).isRequired,\n  endValue: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]).isRequired,\n  property: _propTypes2.default.string.isRequired,\n  unit: _propTypes2.default.string\n});\n\n// Check for the universal rendering\n// HTMLElement in the proptypes breaks on server\n// https://github.com/Stanko/react-plx/issues/25\nvar SafeHTMLElement = WINDOW_EXISTS ? window.HTMLElement : {};\n\nvar parallaxDataType = _propTypes2.default.shape({\n  start: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number, _propTypes2.default.instanceOf(SafeHTMLElement)]).isRequired,\n  startOffset: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  duration: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number, _propTypes2.default.instanceOf(SafeHTMLElement)]),\n  end: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number, _propTypes2.default.instanceOf(SafeHTMLElement)]),\n  endOffset: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  properties: _propTypes2.default.arrayOf(propertiesItemType).isRequired,\n  easing: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.array, _propTypes2.default.func]),\n  name: _propTypes2.default.string\n});\n\nPlx.propTypes = {\n  animateWhenNotInViewport: _propTypes2.default.bool,\n  children: _propTypes2.default.any,\n  className: _propTypes2.default.string,\n  disabled: _propTypes2.default.bool,\n  freeze: _propTypes2.default.bool,\n  parallaxData: _propTypes2.default.arrayOf(parallaxDataType),\n  style: _propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number, _propTypes2.default.object])),\n  tagName: _propTypes2.default.string,\n  onPlxStart: _propTypes2.default.func,\n  onPlxEnd: _propTypes2.default.func\n};\n\nPlx.defaultProps = {\n  animateWhenNotInViewport: false,\n  children: null,\n  className: '',\n  disabled: false,\n  freeze: false,\n  parallaxData: [],\n  style: {},\n  tagName: 'div',\n  onPlxStart: null,\n  onPlxEnd: null\n};"]},"metadata":{},"sourceType":"script"}